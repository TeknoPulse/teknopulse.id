---
import { getAllCategories, type Category } from '../utils/categories';

const categories: Category[] = getAllCategories();
const currentCategory = Astro.url.pathname.split('/').pop() || '';
---

<section class="py-8">
  <div class="container mx-auto px-4">
    <h2 class="mb-6 text-2xl font-semibold text-text-primary dark:text-gray-100">
      Jelajahi Kategori
    </h2>
    <div class="flex flex-wrap gap-3">
      <a
        href="/"
        class={`category-badge ${currentCategory === '' ? 'ring-2 ring-primary ring-offset-2' : ''}`}
        class:list={[
          'bg-primary-100 text-primary hover:bg-primary-200',
          currentCategory === '' && 'bg-primary text-white hover:bg-primary-hover'
        ]}
      >
        Semua
      </a>
      {categories.map((category) => (
        <a
          href={`/category/${category.slug}`}
          class={`category-badge category-${category.slug} ${currentCategory === category.slug ? 'ring-2 ring-offset-2' : ''}`}
          class:list={[
            currentCategory === category.slug && 'ring-2',
            currentCategory === category.slug && 'ring-primary'
          ]}
        >
          {category.name}
        </a>
      ))}
    </div>
  </div>
</section>

<style>
  .category-badge {
    transition: all 0.2s ease-in-out;
  }

  .category-badge:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }

  .category-ai {
    background-color: rgba(139, 92, 246, 0.1);
    color: hsl(270, 80%, 60%);
  }

  .category-ai:hover {
    background-color: rgba(139, 92, 246, 0.2);
  }

  .category-cloud {
    background-color: rgba(59, 130, 246, 0.1);
    color: hsl(195, 80%, 50%);
  }

  .category-cloud:hover {
    background-color: rgba(59, 130, 246, 0.2);
  }

  .category-security {
    background-color: rgba(239, 68, 68, 0.1);
    color: hsl(0, 85%, 60%);
  }

  .category-security:hover {
    background-color: rgba(239, 68, 68, 0.2);
  }

  .category-devtools {
    background-color: rgba(34, 197, 94, 0.1);
    color: hsl(140, 70%, 45%);
  }

  .category-devtools:hover {
    background-color: rgba(34, 197, 94, 0.2);
  }

  .category-policy {
    background-color: rgba(251, 146, 60, 0.1);
    color: hsl(38, 90%, 55%);
  }

  .category-policy:hover {
    background-color: rgba(251, 146, 60, 0.2);
  }

  /* Dark mode category styles */
  :global(.dark) .category-ai {
    background-color: rgba(139, 92, 246, 0.15);
    color: hsl(270, 80%, 70%);
  }

  :global(.dark) .category-ai:hover {
    background-color: rgba(139, 92, 246, 0.25);
  }

  :global(.dark) .category-cloud {
    background-color: rgba(59, 130, 246, 0.15);
    color: hsl(195, 80%, 60%);
  }

  :global(.dark) .category-cloud:hover {
    background-color: rgba(59, 130, 246, 0.25);
  }

  :global(.dark) .category-security {
    background-color: rgba(239, 68, 68, 0.15);
    color: hsl(0, 85%, 70%);
  }

  :global(.dark) .category-security:hover {
    background-color: rgba(239, 68, 68, 0.25);
  }

  :global(.dark) .category-devtools {
    background-color: rgba(34, 197, 94, 0.15);
    color: hsl(140, 70%, 55%);
  }

  :global(.dark) .category-devtools:hover {
    background-color: rgba(34, 197, 94, 0.25);
  }

  :global(.dark) .category-policy {
    background-color: rgba(251, 146, 60, 0.15);
    color: hsl(38, 90%, 65%);
  }

  :global(.dark) .category-policy:hover {
    background-color: rgba(251, 146, 60, 0.25);
  }

  /* Dark mode styles */
  :global(.dark) .category-badge {
    background-color: rgba(255, 255, 255, 0.05);
    color: rgb(156, 163, 175);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  :global(.dark) .category-badge:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: rgb(209, 213, 219);
  }
</style>