---
import type { CollectionEntry } from 'astro:content';
import { Image } from 'astro:assets';

interface Props {
  posts: CollectionEntry<'posts'>[];
}

const { posts } = Astro.props;
---

<section class="py-8 bg-gray-50/50 dark:bg-gray-900/50">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-2xl font-semibold text-text-primary dark:text-gray-100">
        ðŸ”¥ Trending Minggu Ini
      </h2>
      <a href="/posts" class="text-primary hover:text-primary-hover font-medium text-sm">
        Lihat Semua â†’
      </a>
    </div>

    <div class="flex gap-6 overflow-x-auto pb-4 scrollbar-hide">
      {posts.map((post) => (
        <div class="flex-shrink-0 w-80 group cursor-pointer">
          <div class="card card-elevated h-full">
            {post.data.coverImage && (
              <div class="relative overflow-hidden rounded-t-lg">
                <Image
                  src={post.data.coverImage}
                  alt={post.data.title}
                  width={320}
                  height={160}
                  class="h-40 w-full object-cover transition-transform duration-300 group-hover:scale-105"
                />
                <div class="absolute top-3 left-3">
                  <span
                    class={`category-badge category-${post.data.category.toLowerCase()}`}
                  >
                    {post.data.category}
                  </span>
                </div>
              </div>
            )}

            <div class="p-4">
              <h3 class="font-semibold text-text-primary dark:text-gray-100 mb-2 line-clamp-2 group-hover:text-primary transition-colors">
                {post.data.title}
              </h3>
              <p class="text-sm text-text-secondary dark:text-gray-400 mb-3 line-clamp-2">
                {post.data.summary}
              </p>
              <div class="flex items-center justify-between text-xs text-text-muted dark:text-gray-500">
                <span>{new Date(post.data.publishedAt).toLocaleDateString('id-ID')}</span>
                <span>{post.data.readingTime} min read</span>
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Enhanced hover effects */
  .group:hover .card-elevated {
    box-shadow: 0 20px 25px rgba(0, 0, 0, 0.15);
  }

  /* Category badge styles */
  .category-ai {
    background-color: rgba(139, 92, 246, 0.1);
    color: hsl(270, 80%, 60%);
  }

  .category-cloud {
    background-color: rgba(59, 130, 246, 0.1);
    color: hsl(195, 80%, 50%);
  }

  .category-security {
    background-color: rgba(239, 68, 68, 0.1);
    color: hsl(0, 85%, 60%);
  }

  .category-devtools {
    background-color: rgba(34, 197, 94, 0.1);
    color: hsl(140, 70%, 45%);
  }

  .category-policy {
    background-color: rgba(251, 146, 60, 0.1);
    color: hsl(38, 90%, 55%);
  }

  /* Dark mode category styles */
  :global(.dark) .category-ai {
    background-color: rgba(139, 92, 246, 0.15);
    color: hsl(270, 80%, 70%);
  }

  :global(.dark) .category-cloud {
    background-color: rgba(59, 130, 246, 0.15);
    color: hsl(195, 80%, 60%);
  }

  :global(.dark) .category-security {
    background-color: rgba(239, 68, 68, 0.15);
    color: hsl(0, 85%, 70%);
  }

  :global(.dark) .category-devtools {
    background-color: rgba(34, 197, 94, 0.15);
    color: hsl(140, 70%, 55%);
  }

  :global(.dark) .category-policy {
    background-color: rgba(251, 146, 60, 0.15);
    color: hsl(38, 90%, 65%);
  }

  /* Dark mode adjustments */
  :global(.dark) .bg-gray-50\/50 {
    background-color: rgba(31, 41, 55, 0.3);
  }
</style>