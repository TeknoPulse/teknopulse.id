---
const pathname = Astro.url.pathname;
const segments = pathname.split('/').filter(s => s !== '');

let breadcrumbs = [{ name: 'Home', url: '/' }];

segments.forEach((segment, index) => {
  const url = '/' + segments.slice(0, index + 1).join('/');
  const name = segment.replace(/-/g, ' ').split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
  breadcrumbs.push({ name, url });
});
---

<nav class="container mx-auto px-4 py-2 text-sm text-gray-600 dark:text-gray-400" aria-label="breadcrumb">
  <ol class="flex space-x-2" itemscope itemtype="https://schema.org/BreadcrumbList">
    {breadcrumbs.map((item, index) => (
      <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a
          itemprop="item"
          href={item.url}
          class="hover:underline"
          aria-current={index === breadcrumbs.length - 1 ? 'page' : undefined}
        >
          <span itemprop="name">{item.name}</span>
        </a>
        <meta itemprop="position" content={index + 1} />
        {index < breadcrumbs.length - 1 && (
          <span class="mx-2">/</span>
        )}
      </li>
    ))}
  </ol>
</nav>
